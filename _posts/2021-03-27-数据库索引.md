---
layout: post
title: "数据库索引的所用"
date: 2021-03-27 00:08:00 +0800
comments: false
---

平时很少用到服务端数据库操作，不过还是应该学习下数据库知识。

数据库需要建索引，能够提高查询速度，索引可以用哈希索引，或者树状索引。

比如 ： select * from mytable where name = "username"

如果用 name 字段简历索引，对应的结构用哈希索引，用name字段的内容hash后简历哈希表，对应value是记录的id，那么查询速度可以很快，O(1) 的时间就可以找到 name = "username" 的记录。

但这个索引的数据结构不适合大部份的查询场景，比如查询的时候经常会用排序，order by **， 比如限定 时间为 20210326 - 20210327 的数据。
这个时候使用哈希表查找就是 O(n)。

用二叉搜索树进行查找可以提高查找效率，为 O(logn)。
但为数据建立二叉搜索树，树的层级很多，占用空间很大。

B树是 m叉搜索树，一个节点对应 m 个子节点。这样可以很大的减少树的层级，而且占用的空间不大。比如 m = 500, 1 -> 500 -> 2500 -> 500^3 (0.125M)-> 500^4 () ？ 这个不是很确定。

B树的结构方面了磁盘数据的读取，一次读取一块数据，比如 4K，而不是一次读取一条数据。利用了空间局部性原理。

B+树是在B树的基础上进行改进，B+树只在叶子结点存储数据。叶子结点用双向链表进行连接。这样需要获取指定范围的数据块时，通过链表可以快速获取。


